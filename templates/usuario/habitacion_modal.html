<!-- Modal de especificaciones para habitación {{ h.nombre }} -->
<div class="modal fade" id="modalHabitacion{{ h.id }}" tabindex="-1" aria-labelledby="modalLabel{{ h.id }}" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 600px;">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 1rem; overflow: hidden;">
            <div class="position-relative">
                <!-- Imagen de la habitación -->
                <div style="height: 180px; overflow: hidden;">
                    {% set raw = h.imagen or '' %}
                    {% if raw and (raw[:4]|lower == 'http') %}
                        {% set img_url = raw %}
                    {% else %}
                        {% set fn = (raw|replace('\\\\','/')|replace('\\','/') ) %}
                        {% if fn.startswith('/static/') %}{% set fn = fn[8:] %}{% endif %}
                        {% if fn.startswith('static/') %}{% set fn = fn[7:] %}{% endif %}
                        {% set img_url = url_for('static', filename=fn if fn else 'img/default.jpg') %}
                    {% endif %}
                    <img src="{{ img_url }}" alt="{{ h.nombre }}" class="w-100 h-100" style="object-fit: cover;" 
                         onerror="this.onerror=null;this.src='{{ url_for('static', filename='img/default.jpg') }}'">
                </div>
                
                <!-- Botón de cerrar -->
                <button type="button" class="btn-close position-absolute top-0 end-0 m-3 bg-white rounded-circle p-2 shadow-sm" 
                        data-bs-dismiss="modal" aria-label="Close" style="width: 40px; height: 40px;"></button>
                
                <!-- Badge de precio -->
                <div class="position-absolute bottom-0 start-0 m-2">
                    <div class="bg-white px-2 py-1 rounded-pill shadow-sm">
                        <span class="fs-6 fw-bold text-primary">${{ '{:,.0f}'.format(h.precio) }}</span>
                        <span class="text-muted" style="font-size: 0.75rem;">COP por noche</span>
                    </div>
                </div>
            </div>

            <div class="modal-body p-3">
                <!-- Título y descripción -->
                <h2 class="fw-bold fs-4 text-dark mb-2">{{ h.nombre }}</h2>
                <p class="text-muted mb-3 small">
                    {{ h.descripcion or 'Espaciosa habitación con todas las comodidades para una estadía inolvidable.' }}
                </p>

                <!-- Especificaciones -->
                <div class="mb-3">
                    <h3 class="fs-6 fw-semibold text-dark mb-2">Especificaciones</h3>
                    <div class="row g-2">
                        <!-- Área -->
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-light rounded-2">
                                <div class="bg-primary bg-opacity-10 p-1 rounded-2">
                                    <i class="bi bi-rulers text-primary" style="font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <p class="text-muted mb-0" style="font-size: 0.75rem;">Área</p>
                                    <p class="fw-semibold mb-0 small">{{ h.area or '35' }} m²</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cama -->
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-light rounded-2">
                                <div class="bg-primary bg-opacity-10 p-1 rounded-2">
                                    <i class="bi bi-house-door text-primary" style="font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <p class="text-muted mb-0" style="font-size: 0.75rem;">Cama</p>
                                    <p class="fw-semibold mb-0 small">
                                        {% if 'suite' in h.nombre.lower() or 'deluxe' in h.nombre.lower() %}
                                            King Size
                                        {% elif h.cupo_personas >= 3 %}
                                            Queen Size
                                        {% else %}
                                            Matrimonial
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Capacidad -->
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-light rounded-2">
                                <div class="bg-primary bg-opacity-10 p-1 rounded-2">
                                    <i class="bi bi-people text-primary" style="font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <p class="text-muted mb-0" style="font-size: 0.75rem;">Capacidad</p>
                                    <p class="fw-semibold mb-0 small">{{ h.cupo_personas }} persona{{ 's' if h.cupo_personas != 1 else '' }}</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Baño -->
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-light rounded-2">
                                <div class="bg-primary bg-opacity-10 p-1 rounded-2">
                                    <i class="bi bi-droplet text-primary" style="font-size: 1rem;"></i>
                                </div>
                                <div>
                                    <p class="text-muted mb-0" style="font-size: 0.75rem;">Baño</p>
                                    <p class="fw-semibold mb-0 small">
                                        {% if 'suite' in h.nombre.lower() %}
                                            Privado con jacuzzi
                                        {% else %}
                                            Privado con ducha
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Amenidades -->
                <div class="mb-3">
                    <h3 class="fs-6 fw-semibold text-dark mb-2">Amenidades</h3>
                    <div class="row g-1">
                        <!-- WiFi -->
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-primary bg-opacity-5 rounded-2">
                                <i class="bi bi-wifi text-primary" style="font-size: 0.9rem;"></i>
                                <span class="fw-medium text-dark small">WiFi gratis</span>
                            </div>
                        </div>
                        
                        <!-- Aire acondicionado -->
                        {% if 'suite' in h.nombre.lower() or 'deluxe' in h.nombre.lower() or h.plan in ['oro', 'plata'] %}
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-primary bg-opacity-5 rounded-2">
                                <i class="bi bi-wind text-primary" style="font-size: 0.9rem;"></i>
                                <span class="fw-medium text-dark small">Aire acondicionado</span>
                            </div>
                        </div>
                        {% endif %}
                        
                        <!-- TV -->
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-primary bg-opacity-5 rounded-2">
                                <i class="bi bi-tv text-primary" style="font-size: 0.9rem;"></i>
                                <span class="fw-medium text-dark small">
                                    {% if 'suite' in h.nombre.lower() %}
                                        TV Smart 55"
                                    {% elif 'deluxe' in h.nombre.lower() %}
                                        TV Smart 50"
                                    {% else %}
                                        TV Smart 42"
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                        
                        <!-- Minibar -->
                        {% if 'suite' in h.nombre.lower() or h.plan == 'oro' %}
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-primary bg-opacity-5 rounded-2">
                                <i class="bi bi-cup-straw text-primary" style="font-size: 0.9rem;"></i>
                                <span class="fw-medium text-dark small">Minibar</span>
                            </div>
                        </div>
                        {% endif %}
                        
                        <!-- Balcón -->
                        {% if 'ocean' in h.nombre.lower() or 'vista' in h.nombre.lower() %}
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-primary bg-opacity-5 rounded-2">
                                <i class="bi bi-eye text-primary" style="font-size: 0.9rem;"></i>
                                <span class="fw-medium text-dark small">Vista al océano</span>
                            </div>
                        </div>
                        {% endif %}
                        
                        <!-- Escritorio -->
                        {% if 'suite' in h.nombre.lower() or 'deluxe' in h.nombre.lower() %}
                        <div class="col-6">
                            <div class="d-flex align-items-center gap-2 p-2 bg-primary bg-opacity-5 rounded-2">
                                <i class="bi bi-laptop text-primary" style="font-size: 0.9rem;"></i>
                                <span class="fw-medium text-dark small">Área de trabajo</span>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Botón de reservar -->
                <div class="d-grid">
                    <a href="{{ url_for('hospedaje_usuario.reservar_habitacion', habitacion_id=h.id) }}" 
                       class="btn btn-primary fw-semibold py-2 rounded-3 shadow-sm">
                        <i class="bi bi-calendar-check me-2"></i>Reservar Ahora
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Estilos específicos para este modal -->
<style>
    .modal-content {
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
    }
    
    .btn-close {
        background-size: 16px;
        opacity: 0.8;
        transition: opacity 0.2s ease;
    }
    
    .btn-close:hover {
        opacity: 1;
    }
    
    #modalHabitacion{{ h.id }} .bg-primary.bg-opacity-5 {
        background-color: rgba(13, 110, 253, 0.05) !important;
    }
    
    #modalHabitacion{{ h.id }} .bg-primary.bg-opacity-10 {
        background-color: rgba(13, 110, 253, 0.1) !important;
    }
    
    #modalHabitacion{{ h.id }} .modal.fade .modal-dialog {
        transition: transform 0.3s ease-out;
        transform: translate(0, -20px);
    }
    
    #modalHabitacion{{ h.id }} .modal.show .modal-dialog {
        transform: none;
    }
</style>